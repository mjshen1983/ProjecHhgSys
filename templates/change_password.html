{% extends 'base.html' %}

{% block title %}修改密码 · 淮海集团项目管理平台{% endblock %}

{% block content %}
<h1>修改密码</h1>
<form method="post" autocomplete="off">
    {% csrf_token %}
    <div class="form-field">
        <label for="old_password">旧密码</label>
        <input id="old_password" type="password" name="old_password" required autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
    </div>
    <div class="form-field">
        <label for="new_password">新密码</label>
        <input id="new_password" type="password" name="new_password" required autocomplete="new-password" autocorrect="off" autocapitalize="none" spellcheck="false">
    </div>
    <div class="form-field">
        <label for="confirm_password">确认新密码</label>
        <input id="confirm_password" type="password" name="confirm_password" required autocomplete="new-password" autocorrect="off" autocapitalize="none" spellcheck="false">
    </div>
    <button type="submit" class="primary-button">保存密码</button>
</form>
{% if messages %}
    <ul class="message-list">
    {% for message in messages %}
        <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
    </ul>
{% endif %}
<a class="return-link" href="{% url 'main' %}">返回</a>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    const passwordInputs = document.querySelectorAll('input[type="password"]');
    passwordInputs.forEach(function (input) {
        input.value = '';
        input.setAttribute('autocomplete', 'new-password');
        // 针对某些浏览器的自动填充延迟清空
        setTimeout(function () {
            input.value = '';
        }, 100);
    });
});
</script>
{% endblock %}
